# Understanding IDs in the Backend

## What is the ID?

The **ID** is a **UUID (Universally Unique Identifier)** generated automatically by the backend when you create a user.

### Format
- **Example**: `550e8400-e29b-41d4-a716-446655440000`
- **Length**: 36 characters (32 hex digits + 4 hyphens)
- **Generated by**: `uuid.uuid4()` in Python

### Where is it generated?

In `backend/app.py`, line 41:
```python
user_id = str(uuid.uuid4())
```

This creates a unique ID for each user that:
- ✅ Is globally unique
- ✅ Cannot be guessed
- ✅ Is safe for public use
- ✅ Works across distributed systems

## Why can't I see my record?

### Issue 1: Frontend is NOT connected to Backend

The frontend signup page is currently using **mock data** and NOT calling the backend API.

**Current code** (Signup.tsx line 48-59):
```typescript
// Simulate signup - in real app, this would call an API
const mockUser = {
  id: `user-${Date.now()}`,  // This is NOT a real backend ID!
  email,
  name,
  role,
  // ...
};
setUser(mockUser);  // This only saves to localStorage, NOT database
```

**This means:**
- ❌ No record is created in the database
- ❌ The ID shown is fake (`user-1234567890`)
- ❌ Data only exists in browser localStorage

### Issue 2: Need to check the database

Even if you manually inserted a record, you need to:
1. Check the database file
2. Use the correct UUID to query it

## How to Check Your Database

### Method 1: Use the check script
```bash
cd backend
python check_database.py
```

This will show all users, tutors, activities, etc.

### Method 2: Use the API endpoint
```bash
# Get all users
curl http://localhost:5000/api/users

# Get specific user by ID
curl http://localhost:5000/api/users/YOUR-UUID-HERE
```

### Method 3: Use SQLite directly
```bash
cd backend
sqlite3 therapy_weaver.db

# List all users
SELECT id, email, name, role FROM users;

# Exit
.quit
```

## How to Connect Frontend to Backend

To actually save records to the database, you need to:

1. **Update Signup.tsx** to call the API:
```typescript
const response = await fetch(`${config.apiUrl}/auth/signup`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    email,
    password,
    name,
    role,
    region: role === 'tutor' ? region : undefined,
  }),
});

const data = await response.json();
if (response.ok) {
  setUser(data.user);  // Use the real ID from backend
  navigate('/');
} else {
  setError(data.error);
}
```

2. **Update Login.tsx** similarly

3. **Make sure backend is running**:
```bash
cd backend
python app.py
```

## Testing the Backend Directly

You can test if the backend is working:

```bash
# Signup
curl -X POST http://localhost:5000/api/auth/signup \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "test123",
    "name": "Test User",
    "role": "tutor",
    "region": "north"
  }'

# This will return:
# {
#   "user": {
#     "id": "550e8400-e29b-41d4-a716-446655440000",  <-- Real UUID
#     "email": "test@example.com",
#     ...
#   }
# }
```

## Summary

- **ID** = UUID generated by backend (e.g., `550e8400-e29b-41d4-a716-446655440000`)
- **Current issue**: Frontend uses mock data, so no real records are created
- **Solution**: Connect frontend to backend API
- **Check database**: Use `check_database.py` or API endpoint `/api/users`

